{% extends "got/base_generic.html" %}

{% block headtag %}
<!-- Puedes incluir aquÃ­ cualquier CSS o JavaScript adicional que necesites -->
{% endblock %}

{% block header %}
    {{ asset.name }}
{% endblock %}

{% block content %}
<div class="container">
    <table class="table table-bordered">
        <thead>
            <tr>
                <th rowspan="2">Sistemas</th>
                <th rowspan="2">Rutinas</th>
                <th rowspan="2">-</th>
                {% for year, months_in_year in year_months.items %}
                    <th colspan="{{ months_in_year|length }}" style="text-align: center;">{{ year }}</th>
                {% endfor %}
            </tr>
            <tr>
                {% for month in months %}
                    <th>{{ month }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for system, routines in routines_by_system.items %}
                {% if routines %}
                    <tr>
                        <td rowspan="{{ routines|length }}">{{ system.name }}</td>
                        {% for routine_info in routines %}
                            {% if not forloop.first %}
                                </tr><tr>
                            {% endif %}
                            <td>{{ routine_info.routine.name }}</td>
                            <td>{{ routine_info.repeticiones }}</td>
                            {% for month_with_year in months_with_year %}
                                <td {% if month_with_year in routine_info.meses_ejecucion %} style="background-color: #f0ad4e;" {% endif %}>-</td>
                            {% endfor %}
                        {% endfor %}
                    </tr>
                {% endif %}
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
